# 4장 애플리케이션 소스 코드에서 도커 이미지까지

## 멀티 스테이지 빌드
- 여러 단계로 빌드를 나누는 방식
- `FROM` 인스트럭션에 `AS` 태그를 통해 빌드 이름 명시 가능
- 최종 산출물은 마지막 단계의 내용물을 담은 도커 이미지
- 각 빌든 단계는 독립적으로 실행되지만 이전 단계에서 만들어진 디렉터리, 파일을 복사 가능
  - `COPY` 인스트럭션에 `--from={빌드 명}`인자를 통해 호스트 파일 시스템이 아닌 앞선 빌드 단계의 파일 시스템 파일임을 명시
- **`RUN`**: 빌드 중 컨테이너 안에서 명령을 실행 후 결과를 이미지 레이어에 저장하는 기능을 하는 인스트럭션
  - `FROM` 인스트럭션에서 지정한 이미지에서 실행할 수 있어야 함
- 하나의 단계에서라도 명령이 실패하면 전체 빌드 실패
