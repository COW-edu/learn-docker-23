# 5장 도커 허브 등 레지스트리에 이미지 공유하기

도커 플랫폼은 소프트웨어 배포 기능을 내장함. 로컬에 이미지 없어도 도커가 자동으로 이미지 내려받음. 내려받은 이미지는 도커 레지스트리 서버에 저장됌. 도커허브가 가장 유명함. 도커 허브는 도커 엔진의 기본으로 설정된 레지스트리.

도커 이미지엔 이름이 부여됌. 이미지의 전체 이름은 4개로 구성됌.

`docker.io/diamol/golang:latest` -> 이미지가 저장된 레지스트리 도메인/이미지 소유자/이미지 레포 이름:태그(버전 default:latest)

### 도커 허브에 빌드한 이미지 푸시하기.

1. 도커 명령행에 레지스트리에 로그인 -> 이미지 푸시권한 부여 `docker login --username $dockerId`
2. 이미지 푸시 권한을 가진 계정명을 포함하는 이미지 참조를 붙이기. `docker image tag 이미지명 $dockerId/이미지명:태그`
3. 이미지 푸시하기 `docek image push $dockerId/이미지명:태그`

`export dockerId="도커 허브 계정 이름"` 통해 환경변수 설정가능. `echo $dockerId`로 확인 가능

도커 레지스트지도 로컬 도커엔진 처럼 이미지 레이어를 다룸. 이미지 푸시 시 실제 업로드 대상은 이미지 레이어다.
캐시가 같은 경우 푸시 안됌.

`echo "https://hub.docker.com/r/$dockerId/이미지명/태그` 통해 푸시 이미지 확인 가능

daemon.json을 통해 도커 설정 가능하지만 앱 내 UI를 통해 설정 가능. (내부 local에 푸시 시 비보안 레지스트리 허용 목록에 추가 필요)

### 골든 이미지

골든 이미지는 공식 이미지(오픈소스 개발팀과 도커가 함께 이미지 관리)를 기반으로 자신이 필요한 설정을 추가함.
